{"version":3,"sources":["webpack:///geosearch.js","webpack:///webpack/bootstrap 9383f3f0e71f0abf1ddb","webpack:///./src/index.ts","webpack:///./src/query.ts","webpack:///./src/provinces.ts","webpack:///./data/provinces.json","webpack:///./data/fsa_to_prov.json","webpack:///./src/types.ts","webpack:///./data/types.json","webpack:///./src/definitions.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","90","_interopRequireDefault","obj","default","_interopRequireWildcard","newObj","key","value","Defs","Types","Provinces","Q","GeoSearch","undefined","lastQuery","_query","_provinces","_provinces2","_types","_types2","_definitions","defs","GEO_LOCATE_URL","GEO_NAMES_URL","uConfig","language","geoLocateUrl","geoNameUrl","replace","this","config","types","provinces","maxResults","filterValidTypes","includeTypes","excludeTypes","ui","resultHandler","featureHandler","input","resultContainer","featureContainer","bind","defaultResultHandler","defaultFeatureHandler","docFrag","document","createDocumentFragment","createElement","appendChild","onkeyup","inputChanged","classList","add","results","ul","reverse","forEach","r","li","innerHTML","type","location","province","LatLon","lat","lon","fR","output","isFSAResult","fsa","nts","evt","_this","qValue","target","length","firstChild","removeChild","query","onComplete","then","q","featureResults","catch","err","make","window","91","test","FSAQuery","substring","toUpperCase","NTSQuery","q_1","Query","search","q_2","Promise","resolve","reject","__extends","extendStatics","setPrototypeOf","__proto__","Array","b","__","constructor","create","suggestions","getUrl","useLocate","restrict","altQuery","url","join","normalizeNameItems","items","filter","validTypes","concise","code","map","list","allTypes","latitude","longitude","bbox","jsonRequest","nameByLatLon","locateByQuery","xobj","XMLHttpRequest","open","responseType","onload","status","response","JSON","parse","send","_super","parseInt","unitName","lr","allSheets","locateToResult","unit","splice","findIndex","x","mapSheets","lrl","ls","title","split","shift","desc","NTS","geometry","coordinates","equals","otherQ","formatLocationResult","fLR","keys","locateResponseList","provList_1","fsaToProvinces","FSA","92","provinceObj","jsonprovs","_fsa_to_prov","jsonfsaToProv","fsaToProv","provs","provKey","genericObj","provCodes","93","en","10","11","12","13","24","35","46","47","48","59","60","61","62","72","73","fr","94","A","B","C","E","G","H","J","K","L","M","N","P","R","S","T","V","X","Y","95","typeObj","jsontypes","filterComplete","typeKey","include","exclude","setExclusion","typeSet","keySet_1","invalidKeys","slice","indexOf","_i","invalidKeys_1","96","PROV","TERR","CITY","TOWN","VILG","HAM","UTM","LTM","STM","MUN1","MUN2","UNP","IR","GEOG","PARK","MIL","RIV","RIVF","FALL","LAKE","SPRG","SEA","SEAF","SEAU","CHAN","RAP","BAY","CAPE","BCH","SHL","ISL","CLF","MTN","VALL","PLN","CAVE","CRAT","GLAC","FOR","VEGL","MISC","RAIL","ROAD","AIR","MAR","HYDR","RECR","RES","CAMP","SITE","97","result","isNTSResult"],"mappings":"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","file":"geosearch.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 90);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 90:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Defs = exports.Types = exports.Provinces = exports.Q = exports.GeoSearch = undefined;\n\nvar _query = __webpack_require__(91);\n\nvar Q = _interopRequireWildcard(_query);\n\nvar _provinces = __webpack_require__(92);\n\nvar _provinces2 = _interopRequireDefault(_provinces);\n\nvar _types = __webpack_require__(95);\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _definitions = __webpack_require__(97);\n\nvar defs = _interopRequireWildcard(_definitions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar GEO_LOCATE_URL = 'https://geogratis.gc.ca/services/geolocation/@{language}/locate';\nvar GEO_NAMES_URL = 'https://geogratis.gc.ca/services/geoname/@{language}/geonames.json';\nvar lastQuery;\nvar GeoSearch = /** @class */function () {\n    function GeoSearch(uConfig) {\n        uConfig = uConfig ? uConfig : {};\n        var language = uConfig.language ? uConfig.language : 'en';\n        // set default URLS if none provided and search/replace language in string (if exists)\n        var geoLocateUrl = uConfig.geoLocateUrl ? uConfig.geoLocateUrl : GEO_LOCATE_URL;\n        var geoNameUrl = uConfig.geoNameUrl ? uConfig.geoNameUrl : GEO_NAMES_URL;\n        geoLocateUrl = geoLocateUrl.replace('@{language}', language);\n        geoNameUrl = geoNameUrl.replace('@{language}', language);\n        this.config = {\n            language: language,\n            types: (0, _types2.default)(language),\n            provinces: (0, _provinces2.default)(language),\n            maxResults: uConfig.maxResults ? uConfig.maxResults : 100,\n            geoNameUrl: geoNameUrl,\n            geoLocateUrl: geoLocateUrl\n        };\n        this.config.types.filterValidTypes(uConfig.includeTypes, uConfig.excludeTypes);\n    }\n    GeoSearch.prototype.ui = function (resultHandler, featureHandler, input, resultContainer, featureContainer) {\n        // bind scope of provided iterator to this class, or set to internal resultIterator implementation for default behaviour\n        this.resultHandler = resultHandler ? resultHandler.bind(this) : this.defaultResultHandler;\n        this.featureHandler = featureHandler ? featureHandler.bind(this) : this.defaultFeatureHandler;\n        this.docFrag = document.createDocumentFragment();\n        if (!input) {\n            input = document.createElement('input');\n            this.docFrag.appendChild(input);\n        }\n        input.onkeyup = this.inputChanged.bind(this);\n        if (!featureContainer) {\n            this.featureContainer = document.createElement('div');\n            this.docFrag.appendChild(this.featureContainer);\n        } else {\n            this.featureContainer = featureContainer;\n        }\n        if (!resultContainer) {\n            this.resultContainer = document.createElement('div');\n            this.docFrag.appendChild(this.resultContainer);\n        } else {\n            this.resultContainer = resultContainer;\n        }\n        this.resultContainer.classList.add('geosearch-ui');\n        this.featureContainer.classList.add('geosearch-ui');\n        return this;\n    };\n    GeoSearch.prototype.defaultResultHandler = function (results) {\n        var ul = document.createElement('ul');\n        results.reverse().forEach(function (r) {\n            var li = document.createElement('li');\n            li.innerHTML = r.name + \" (\" + r.type + \")\" + (r.location ? ', ' + r.location : '') + \", \" + r.province + \" @ lat: \" + r.LatLon.lat + \", lon: \" + r.LatLon.lon;\n            ul.appendChild(li);\n        });\n        return ul;\n    };\n    GeoSearch.prototype.defaultFeatureHandler = function (fR) {\n        var output;\n        if (defs.isFSAResult(fR)) {\n            output = fR.fsa + \" - FSA located in \" + fR.province + \" @ lat: \" + fR.LatLon.lat + \", lon: \" + fR.LatLon.lon;\n        } else {\n            output = fR.nts + \" - NTS located in \" + fR.location + \" @ lat: \" + fR.LatLon.lat + \", lon: \" + fR.LatLon.lon;\n        }\n        var p = document.createElement('p');\n        p.innerHTML = output;\n        return p;\n    };\n    GeoSearch.prototype.inputChanged = function (evt) {\n        var _this = this;\n        var qValue = evt.target.value;\n        if (qValue.length > 2 && qValue !== lastQuery) {\n            lastQuery = qValue;\n            while (this.resultContainer.firstChild) {\n                this.resultContainer.removeChild(this.resultContainer.firstChild);\n            }\n            while (this.featureContainer.firstChild) {\n                this.featureContainer.removeChild(this.featureContainer.firstChild);\n            }\n            this.query(qValue).onComplete.then(function (q) {\n                if (q.featureResults) {\n                    _this.featureContainer.appendChild(_this.featureHandler(q.featureResults));\n                }\n                _this.resultContainer.appendChild(_this.resultHandler(q.results));\n            }).catch(function (err) {\n                var p = document.createElement('p');\n                p.innerHTML = err;\n                _this.resultContainer.appendChild(p);\n            });\n        }\n    };\n    Object.defineProperty(GeoSearch.prototype, \"htmlElem\", {\n        get: function get() {\n            return this.docFrag;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    GeoSearch.prototype.query = function (query) {\n        return Q.make(this.config, query);\n    };\n    return GeoSearch;\n}();\nexports.GeoSearch = GeoSearch;\nexports.Q = Q;\nexports.Provinces = _provinces2.default;\nexports.Types = _types2.default;\nexports.Defs = defs;\n\nif (window) {\n    window.GeoSearch = GeoSearch;\n}\n\n/***/ }),\n\n/***/ 91:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.make = make;\nvar __extends = undefined && undefined.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) {\n            if (b.hasOwnProperty(p)) d[p] = b[p];\n        }\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nfunction make(config, query) {\n    // FSA test\n    if (/^[ABCEGHJKLMNPRSTVXY]\\d[A-Z]/.test(query)) {\n        return new FSAQuery(config, query);\n        // Partial NTS match (Sheet and Map Unit Subdivision)\n    } else if (/^\\d{2,3}[A-P]/.test(query)) {\n        query = query.substring(0, 6).toUpperCase();\n        return new NTSQuery(config, query);\n        // name based search\n    } else if (/^[A-Za-z]/.test(query)) {\n        var q_1 = new Query(config, query);\n        q_1.onComplete = q_1.search().then(function (results) {\n            q_1.results = results;\n            return q_1;\n        });\n        return q_1;\n        // posible street address search (not supported) or contains special characters\n    } else {\n        var q_2 = new Query(config, query);\n        q_2.onComplete = new Promise(function (resolve, reject) {\n            return resolve(q_2);\n        });\n        return q_2;\n    }\n}\nvar Query = /** @class */function () {\n    function Query(config, query) {\n        this.suggestions = [];\n        this.results = [];\n        this.query = query;\n        this.config = config;\n    }\n    Query.prototype.getUrl = function (useLocate, restrict, altQuery, lat, lon) {\n        var url = '';\n        var query = altQuery ? altQuery : this.query;\n        if (useLocate) {\n            url = this.config.geoLocateUrl + '?q=' + query;\n        } else if (lat && lon) {\n            url = this.config.geoNameUrl + \"?lat=\" + lat + \"&lon=\" + lon + \"&num=\" + this.config.maxResults;\n        } else {\n            url = this.config.geoNameUrl + \"?q=\" + query + \"&num=\" + this.config.maxResults;\n        }\n        if (restrict) {\n            if (restrict.length === 4) {\n                url += \"&bbox=\" + restrict.join(',');\n            } else {\n                url += \"&province=\" + restrict.join(',');\n            }\n        }\n        return url;\n    };\n    Query.prototype.normalizeNameItems = function (items) {\n        var _this = this;\n        return items.filter(function (i) {\n            return _this.config.types.validTypes[i.concise.code];\n        }).map(function (i) {\n            return {\n                name: i.name,\n                location: i.location,\n                province: _this.config.provinces.list[i.province.code],\n                type: _this.config.types.allTypes[i.concise.code],\n                LatLon: { lat: i.latitude, lon: i.longitude },\n                bbox: i.bbox\n            };\n        });\n    };\n    Query.prototype.search = function (restrict) {\n        var _this = this;\n        return this.jsonRequest(this.getUrl(false, restrict)).then(function (r) {\n            return _this.normalizeNameItems(r.items);\n        });\n    };\n    Query.prototype.nameByLatLon = function (lat, lon, restrict) {\n        var _this = this;\n        return this.jsonRequest(this.getUrl(false, restrict, undefined, lat, lon)).then(function (r) {\n            return _this.normalizeNameItems(r.items);\n        });\n    };\n    Query.prototype.locateByQuery = function (altQuery) {\n        return this.jsonRequest(this.getUrl(true, undefined, altQuery));\n    };\n    Query.prototype.jsonRequest = function (url) {\n        return new Promise(function (resolve, reject) {\n            var xobj = new XMLHttpRequest();\n            xobj.open('GET', url, true);\n            xobj.responseType = 'json';\n            xobj.onload = function () {\n                if (xobj.status === 200) {\n                    resolve(typeof xobj.response === 'string' ? JSON.parse(xobj.response) : xobj.response);\n                } else {\n                    reject('Could not load results from remote service.');\n                }\n            };\n            xobj.send();\n        });\n    };\n    return Query;\n}();\nexports.Query = Query;\n/**\n * National Topographic System (NTS)\n *\n * The following definitions have the form \"name (value constraints) - description\"\n *\n * Sheet (two or three digits)      - aka \"Map Numbers\" are blocks of approximately 4,915,200 hectares.\n * Map Units Subdivision ([A-P])    - each sheet is subdivided further into 16 blocks, approximately 307,200 hectares\n * Map Sheet Unit ([1-16])          - each map unit is subdivided further into 16 blocks, approximately 19,200 hectares\n * Blocks ([A-L])                   - each map sheet unit is subdivided further into 12 blocks, approximately 1600 hectares\n * Units ([1-100]*)                 - each block is finally divided into 100 units, approximately 64 hectares\n *\n * Two subsets of the complete NTS format is supported:\n *     - Sheet and Map Unit Subdivision\n *     - Sheet, Map Unit Subdivision, and Map Sheet Unit\n *\n * Note that \"Blocks\" and \"Units\" are currently not supported on geogratis and are ignored on the query.\n */\n\nvar NTSQuery = /** @class */function (_super) {\n    __extends(NTSQuery, _super);\n    function NTSQuery(config, query) {\n        var _this = this;\n        // front pad 0 if NTS starts with two digits\n        query = !parseInt(query[2]) ? '0' + query : query;\n        _this = _super.call(this, config, query) || this;\n        _this.unitName = query;\n        _this.onComplete = new Promise(function (resolve, reject) {\n            _this.locateByQuery().then(function (lr) {\n                // query check added since it can be null but will never be in this case (make TS happy)\n                if (lr.length > 0 && _this.query) {\n                    var allSheets = _this.locateToResult(lr);\n                    _this.unit = allSheets.splice(allSheets.findIndex(function (x) {\n                        return x.nts === _this.query;\n                    }), 1)[0];\n                    _this.mapSheets = allSheets;\n                    _this.featureResults = _this.unit;\n                    _this.nameByLatLon(_this.unit.LatLon.lat, _this.unit.LatLon.lon).then(function (r) {\n                        _this.results = r;\n                        resolve(_this);\n                    });\n                } else {\n                    reject('Not found');\n                }\n            });\n        });\n        return _this;\n    }\n    NTSQuery.prototype.locateToResult = function (lrl) {\n        var _this = this;\n        var results = lrl.map(function (ls) {\n            var title = ls.title.split(' ');\n            return {\n                nts: title.shift() || '',\n                location: title.join(' '),\n                code: 'NTS',\n                desc: _this.config.types.allTypes.NTS,\n                LatLon: { lat: ls.geometry.coordinates[1], lon: ls.geometry.coordinates[0] },\n                bbox: ls.bbox\n            };\n        });\n        return results;\n    };\n    NTSQuery.prototype.equals = function (otherQ) {\n        return this.unitName === otherQ.unitName;\n    };\n    return NTSQuery;\n}(Query);\nexports.NTSQuery = NTSQuery;\n\nvar FSAQuery = /** @class */function (_super) {\n    __extends(FSAQuery, _super);\n    function FSAQuery(config, query) {\n        var _this = this;\n        query = query.substring(0, 3).toUpperCase();\n        _this = _super.call(this, config, query) || this;\n        _this.onComplete = new Promise(function (resolve, reject) {\n            _this.formatLocationResult().then(function (fLR) {\n                if (fLR) {\n                    _this.featureResults = fLR;\n                    _this.nameByLatLon(fLR.LatLon.lat, fLR.LatLon.lon, Object.keys(fLR._provinces).map(function (x) {\n                        return parseInt(x);\n                    })).then(function (r) {\n                        _this.results = r;\n                        resolve(_this);\n                    });\n                } else {\n                    reject('FSA code given cannot be found.');\n                }\n            });\n        });\n        return _this;\n    }\n    FSAQuery.prototype.formatLocationResult = function () {\n        var _this = this;\n        return this.locateByQuery().then(function (locateResponseList) {\n            // query check added since it can be null but will never be in this case (make TS happy)\n            if (locateResponseList.length === 1 && _this.query) {\n                var provList_1 = _this.config.provinces.fsaToProvinces(_this.query);\n                return {\n                    fsa: _this.query,\n                    code: 'FSA',\n                    desc: _this.config.types.allTypes.FSA,\n                    province: Object.keys(provList_1).map(function (i) {\n                        return provList_1[i];\n                    }).join(','),\n                    _provinces: provList_1,\n                    LatLon: { lat: locateResponseList[0].geometry.coordinates[1], lon: locateResponseList[0].geometry.coordinates[0] }\n                };\n            }\n        });\n    };\n    return FSAQuery;\n}(Query);\nexports.FSAQuery = FSAQuery;\n\n/***/ }),\n\n/***/ 92:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (language) {\n    return provinceObj[language] = provinceObj[language] ? provinceObj[language] : new Provinces(language);\n};\n\nvar _provinces = __webpack_require__(93);\n\nvar jsonprovs = _interopRequireWildcard(_provinces);\n\nvar _fsa_to_prov = __webpack_require__(94);\n\nvar jsonfsaToProv = _interopRequireWildcard(_fsa_to_prov);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar provinceObj = {};\nvar fsaToProv = jsonfsaToProv;\nvar provs = jsonprovs;\nvar Provinces = /** @class */function () {\n    function Provinces(language) {\n        var _this = this;\n        this.list = {};\n        Object.keys(provs[language]).forEach(function (provKey) {\n            _this.list[provKey] = provs[language][provKey];\n        });\n    }\n    Provinces.prototype.fsaToProvinces = function (fsa) {\n        var _this = this;\n        var genericObj = {};\n        // either a provincial code, or an array of them\n        var provCodes = fsaToProv[fsa.substring(0, 1).toUpperCase()];\n        if (typeof provCodes === 'number') {\n            provCodes = [provCodes];\n        }\n        provCodes.forEach(function (n) {\n            genericObj[n] = _this.list[n];\n        });\n        return genericObj;\n    };\n    return Provinces;\n}();\n\n/***/ }),\n\n/***/ 93:\n/***/ (function(module, exports) {\n\nmodule.exports = {\"en\":{\"10\":\"Newfoundland and Labrador\",\"11\":\"Prince Edward Island\",\"12\":\"Nova Scotia\",\"13\":\"New Brunswick\",\"24\":\"Quebec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"British Columbia\",\"60\":\"Yukon\",\"61\":\"Northwest Territories\",\"62\":\"Nunavut\",\"72\":\"Undersea Feature\",\"73\":\"International Waters\"},\"fr\":{\"10\":\"Terre-Neuve-et-Labrador\",\"11\":\"Île-du-Prince-Édouard\",\"12\":\"Nouvelle-Écosse\",\"13\":\"Nouveau-Brunswick\",\"24\":\"Québec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"Colombie-Britannique\",\"60\":\"Yukon\",\"61\":\"Territoires du Nord-Ouest\",\"62\":\"Nunavut\",\"72\":\"Entité sous-marine\",\"73\":\"Eaux internationales\"}}\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports) {\n\nmodule.exports = {\"A\":10,\"B\":12,\"C\":11,\"E\":13,\"G\":24,\"H\":24,\"J\":24,\"K\":35,\"L\":35,\"M\":35,\"N\":35,\"P\":35,\"R\":46,\"S\":47,\"T\":48,\"V\":59,\"X\":[62,61],\"Y\":60}\n\n/***/ }),\n\n/***/ 95:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (language) {\n    return typeObj[language] = typeObj[language] ? typeObj[language] : new Types(language);\n};\n\nvar _types = __webpack_require__(96);\n\nvar jsontypes = _interopRequireWildcard(_types);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar typeObj = {};\nvar types = jsontypes;\nvar Types = /** @class */function () {\n    function Types(language) {\n        var _this = this;\n        this.allTypes = {};\n        this.validTypes = {};\n        this.filterComplete = false;\n        Object.keys(types[language]).forEach(function (typeKey) {\n            _this.allTypes[typeKey] = types[language][typeKey];\n            _this.validTypes[typeKey] = types[language][typeKey];\n        });\n    }\n    Types.prototype.filterValidTypes = function (include, exclude) {\n        if (this.filterComplete) {\n            return this.validTypes;\n        }\n        include = typeof include === 'string' ? [include] : include;\n        exclude = typeof exclude === 'string' ? [exclude] : exclude;\n        var setExclusion = include || exclude ? include && include.length > 0 || exclude && exclude.length : undefined;\n        if (setExclusion) {\n            var typeSet = Object.keys(this.validTypes);\n            var keySet_1 = include || exclude || [];\n            var invalidKeys = typeSet.slice().filter(function (x) {\n                return !setExclusion === (keySet_1.indexOf(x) !== -1);\n            });\n            for (var _i = 0, invalidKeys_1 = invalidKeys; _i < invalidKeys_1.length; _i++) {\n                var key = invalidKeys_1[_i];\n                delete this.validTypes[key];\n            }\n        }\n        this.filterComplete = true;\n        return this.validTypes;\n    };\n    return Types;\n}();\n\n/***/ }),\n\n/***/ 96:\n/***/ (function(module, exports) {\n\nmodule.exports = {\"en\":{\"FSA\":\"Forward Sortation Area\",\"NTS\":\"National Topographic System\",\"PROV\":\"Province\",\"TERR\":\"Territory\",\"CITY\":\"City\",\"TOWN\":\"Town\",\"VILG\":\"Village\",\"HAM\":\"Hamlet\",\"UTM\":\"Upper Tier Municipality\",\"LTM\":\"Lower Tier Municipality\",\"STM\":\"Single Tier Municipality\",\"MUN1\":\"Other Municipal-District Area-Major Agglom.\",\"MUN2\":\"Other Municipal-District Area-Miscellaneous\",\"UNP\":\"Unincorporated place\",\"IR\":\"Indian Reserve\",\"GEOG\":\"Geographical Area\",\"PARK\":\"Conservation Area\",\"MIL\":\"Military Area\",\"RIV\":\"River\",\"RIVF\":\"River Feature\",\"FALL\":\"Falls\",\"LAKE\":\"Lake\",\"SPRG\":\"Spring\",\"SEA\":\"Sea\",\"SEAF\":\"Sea Feature\",\"SEAU\":\"Undersea Feature\",\"CHAN\":\"Channel\",\"RAP\":\"Rapids\",\"BAY\":\"Bay\",\"CAPE\":\"Cape\",\"BCH\":\"Beach\",\"SHL\":\"Shoal\",\"ISL\":\"Island\",\"CLF\":\"Cliff\",\"MTN\":\"Mountain\",\"VALL\":\"Valley\",\"PLN\":\"Plain\",\"CAVE\":\"Cave\",\"CRAT\":\"Crater\",\"GLAC\":\"Glacier\",\"FOR\":\"Forest\",\"VEGL\":\"Low Vegetation\",\"MISC\":\"Miscellaneous\",\"RAIL\":\"Railway Feature\",\"ROAD\":\"Road Feature\",\"AIR\":\"Air Navigation Feature\",\"MAR\":\"Marine Navigation Feature\",\"HYDR\":\"Hydraulic Construction\",\"RECR\":\"Recreational Site\",\"RES\":\"Natural Resources Site\",\"CAMP\":\"Miscellaneous Campsite\",\"SITE\":\"Miscellaneous Site\"},\"fr\":{\"FSA\":\"Région De Tri D'Acheminement\",\"NTS\":\"Système National De Référence Cartographique\",\"PROV\":\"Province\",\"TERR\":\"Territoire\",\"CITY\":\"Ville\",\"TOWN\":\"Ville\",\"VILG\":\"Village\",\"HAM\":\"Hameau\",\"UTM\":\"Municipalité de palier supérieure\",\"LTM\":\"Municipalité de palier inférieur\",\"STM\":\"Municipalité de palier simple\",\"MUN1\":\"Autre zone municip.-District-Agglom. majeure\",\"MUN2\":\"Autre zone municipale-District-Divers\",\"UNP\":\"Lieu non organisé\",\"IR\":\"Réserve indienne\",\"GEOG\":\"Zone géographique\",\"PARK\":\"Zone de préservation\",\"MIL\":\"Réserve militaire\",\"RIV\":\"Cours d'eau\",\"RIVF\":\"Entité fluviale\",\"FALL\":\"Chute\",\"LAKE\":\"Lac\",\"SPRG\":\"Source\",\"SEA\":\"Mer\",\"SEAF\":\"Entité maritime\",\"SEAU\":\"Entité sous-marine\",\"CHAN\":\"Chenal\",\"RAP\":\"Rapide\",\"BAY\":\"Baie\",\"CAPE\":\"Cap\",\"BCH\":\"Plage\",\"SHL\":\"Haut-fond\",\"ISL\":\"Île\",\"CLF\":\"Escarpement\",\"MTN\":\"Montagne\",\"VALL\":\"Vallée\",\"PLN\":\"Plaine\",\"CAVE\":\"Caverne\",\"CRAT\":\"Cratère\",\"GLAC\":\"Glacier\",\"FOR\":\"Forêt\",\"VEGL\":\"Végétation basse\",\"MISC\":\"Divers\",\"RAIL\":\"Entité ferroviaire\",\"ROAD\":\"Entité routière\",\"AIR\":\"Entité de navigation aérienne\",\"MAR\":\"Entité de navigation maritime\",\"HYDR\":\"Construction hydraulique\",\"RECR\":\"Site récréationnel\",\"RES\":\"Site de ressources naturelles\",\"CAMP\":\"Camp-Divers\",\"SITE\":\"Site-Divers\"}}\n\n/***/ }),\n\n/***/ 97:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isFSAResult = isFSAResult;\nexports.isNTSResult = isNTSResult;\nfunction isFSAResult(result) {\n    return !!result.fsa;\n}\nfunction isNTSResult(result) {\n    return !!result.nts;\n}\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// geosearch.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 90);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9383f3f0e71f0abf1ddb","import * as Q from './query';\nimport Provinces from './provinces';\nimport Types from './types';\nimport * as defs from './definitions';\nvar GEO_LOCATE_URL = 'https://geogratis.gc.ca/services/geolocation/@{language}/locate';\nvar GEO_NAMES_URL = 'https://geogratis.gc.ca/services/geoname/@{language}/geonames.json';\nvar lastQuery;\nvar GeoSearch = /** @class */ (function () {\n    function GeoSearch(uConfig) {\n        uConfig = uConfig ? uConfig : {};\n        var language = uConfig.language ? uConfig.language : 'en';\n        // set default URLS if none provided and search/replace language in string (if exists)\n        var geoLocateUrl = uConfig.geoLocateUrl ? uConfig.geoLocateUrl : GEO_LOCATE_URL;\n        var geoNameUrl = uConfig.geoNameUrl ? uConfig.geoNameUrl : GEO_NAMES_URL;\n        geoLocateUrl = geoLocateUrl.replace('@{language}', language);\n        geoNameUrl = geoNameUrl.replace('@{language}', language);\n        this.config = {\n            language: language,\n            types: Types(language),\n            provinces: Provinces(language),\n            maxResults: uConfig.maxResults ? uConfig.maxResults : 100,\n            geoNameUrl: geoNameUrl,\n            geoLocateUrl: geoLocateUrl\n        };\n        this.config.types.filterValidTypes(uConfig.includeTypes, uConfig.excludeTypes);\n    }\n    GeoSearch.prototype.ui = function (resultHandler, featureHandler, input, resultContainer, featureContainer) {\n        // bind scope of provided iterator to this class, or set to internal resultIterator implementation for default behaviour\n        this.resultHandler = resultHandler ? resultHandler.bind(this) : this.defaultResultHandler;\n        this.featureHandler = featureHandler ? featureHandler.bind(this) : this.defaultFeatureHandler;\n        this.docFrag = document.createDocumentFragment();\n        if (!input) {\n            input = document.createElement('input');\n            this.docFrag.appendChild(input);\n        }\n        input.onkeyup = this.inputChanged.bind(this);\n        if (!featureContainer) {\n            this.featureContainer = document.createElement('div');\n            this.docFrag.appendChild(this.featureContainer);\n        }\n        else {\n            this.featureContainer = featureContainer;\n        }\n        if (!resultContainer) {\n            this.resultContainer = document.createElement('div');\n            this.docFrag.appendChild(this.resultContainer);\n        }\n        else {\n            this.resultContainer = resultContainer;\n        }\n        this.resultContainer.classList.add('geosearch-ui');\n        this.featureContainer.classList.add('geosearch-ui');\n        return this;\n    };\n    GeoSearch.prototype.defaultResultHandler = function (results) {\n        var ul = document.createElement('ul');\n        results.reverse().forEach(function (r) {\n            var li = document.createElement('li');\n            li.innerHTML = r.name + \" (\" + r.type + \")\" + (r.location ? ', ' + r.location : '') + \", \" + r.province + \" @ lat: \" + r.LatLon.lat + \", lon: \" + r.LatLon.lon;\n            ul.appendChild(li);\n        });\n        return ul;\n    };\n    GeoSearch.prototype.defaultFeatureHandler = function (fR) {\n        var output;\n        if (defs.isFSAResult(fR)) {\n            output = fR.fsa + \" - FSA located in \" + fR.province + \" @ lat: \" + fR.LatLon.lat + \", lon: \" + fR.LatLon.lon;\n        }\n        else {\n            output = fR.nts + \" - NTS located in \" + fR.location + \" @ lat: \" + fR.LatLon.lat + \", lon: \" + fR.LatLon.lon;\n        }\n        var p = document.createElement('p');\n        p.innerHTML = output;\n        return p;\n    };\n    GeoSearch.prototype.inputChanged = function (evt) {\n        var _this = this;\n        var qValue = evt.target.value;\n        if (qValue.length > 2 && qValue !== lastQuery) {\n            lastQuery = qValue;\n            while (this.resultContainer.firstChild) {\n                this.resultContainer.removeChild(this.resultContainer.firstChild);\n            }\n            while (this.featureContainer.firstChild) {\n                this.featureContainer.removeChild(this.featureContainer.firstChild);\n            }\n            this.query(qValue).onComplete.then(function (q) {\n                if (q.featureResults) {\n                    _this.featureContainer.appendChild(_this.featureHandler(q.featureResults));\n                }\n                _this.resultContainer.appendChild(_this.resultHandler(q.results));\n            }).catch(function (err) {\n                var p = document.createElement('p');\n                p.innerHTML = err;\n                _this.resultContainer.appendChild(p);\n            });\n        }\n    };\n    Object.defineProperty(GeoSearch.prototype, \"htmlElem\", {\n        get: function () {\n            return this.docFrag;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    GeoSearch.prototype.query = function (query) {\n        return Q.make(this.config, query);\n    };\n    return GeoSearch;\n}());\nexport { GeoSearch };\nexport { Q, Provinces, Types, defs as Defs };\nif (window) {\n    window.GeoSearch = GeoSearch;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexport function make(config, query) {\n    // FSA test\n    if (/^[ABCEGHJKLMNPRSTVXY]\\d[A-Z]/.test(query)) {\n        return new FSAQuery(config, query);\n        // Partial NTS match (Sheet and Map Unit Subdivision)\n    }\n    else if (/^\\d{2,3}[A-P]/.test(query)) {\n        query = query.substring(0, 6).toUpperCase();\n        return new NTSQuery(config, query);\n        // name based search\n    }\n    else if (/^[A-Za-z]/.test(query)) {\n        var q_1 = new Query(config, query);\n        q_1.onComplete = q_1.search().then(function (results) {\n            q_1.results = results;\n            return q_1;\n        });\n        return q_1;\n        // posible street address search (not supported) or contains special characters\n    }\n    else {\n        var q_2 = new Query(config, query);\n        q_2.onComplete = new Promise(function (resolve, reject) { return resolve(q_2); });\n        return q_2;\n    }\n}\nvar Query = /** @class */ (function () {\n    function Query(config, query) {\n        this.suggestions = [];\n        this.results = [];\n        this.query = query;\n        this.config = config;\n    }\n    Query.prototype.getUrl = function (useLocate, restrict, altQuery, lat, lon) {\n        var url = '';\n        var query = altQuery ? altQuery : this.query;\n        if (useLocate) {\n            url = this.config.geoLocateUrl + '?q=' + query;\n        }\n        else if (lat && lon) {\n            url = this.config.geoNameUrl + \"?lat=\" + lat + \"&lon=\" + lon + \"&num=\" + this.config.maxResults;\n        }\n        else {\n            url = this.config.geoNameUrl + \"?q=\" + query + \"&num=\" + this.config.maxResults;\n        }\n        if (restrict) {\n            if (restrict.length === 4) {\n                url += \"&bbox=\" + restrict.join(',');\n            }\n            else {\n                url += \"&province=\" + restrict.join(',');\n            }\n        }\n        return url;\n    };\n    Query.prototype.normalizeNameItems = function (items) {\n        var _this = this;\n        return items.filter(function (i) { return _this.config.types.validTypes[i.concise.code]; }).map(function (i) {\n            return {\n                name: i.name,\n                location: i.location,\n                province: _this.config.provinces.list[i.province.code],\n                type: _this.config.types.allTypes[i.concise.code],\n                LatLon: { lat: i.latitude, lon: i.longitude },\n                bbox: i.bbox\n            };\n        });\n    };\n    Query.prototype.search = function (restrict) {\n        var _this = this;\n        return this.jsonRequest(this.getUrl(false, restrict)).then(function (r) { return _this.normalizeNameItems(r.items); });\n    };\n    Query.prototype.nameByLatLon = function (lat, lon, restrict) {\n        var _this = this;\n        return this.jsonRequest(this.getUrl(false, restrict, undefined, lat, lon)).then(function (r) { return _this.normalizeNameItems(r.items); });\n    };\n    Query.prototype.locateByQuery = function (altQuery) {\n        return this.jsonRequest(this.getUrl(true, undefined, altQuery));\n    };\n    Query.prototype.jsonRequest = function (url) {\n        return new Promise(function (resolve, reject) {\n            var xobj = new XMLHttpRequest();\n            xobj.open('GET', url, true);\n            xobj.responseType = 'json';\n            xobj.onload = function () {\n                if (xobj.status === 200) {\n                    resolve(typeof xobj.response === 'string' ? JSON.parse(xobj.response) : xobj.response);\n                }\n                else {\n                    reject('Could not load results from remote service.');\n                }\n            };\n            xobj.send();\n        });\n    };\n    return Query;\n}());\nexport { Query };\n/**\n * National Topographic System (NTS)\n *\n * The following definitions have the form \"name (value constraints) - description\"\n *\n * Sheet (two or three digits)      - aka \"Map Numbers\" are blocks of approximately 4,915,200 hectares.\n * Map Units Subdivision ([A-P])    - each sheet is subdivided further into 16 blocks, approximately 307,200 hectares\n * Map Sheet Unit ([1-16])          - each map unit is subdivided further into 16 blocks, approximately 19,200 hectares\n * Blocks ([A-L])                   - each map sheet unit is subdivided further into 12 blocks, approximately 1600 hectares\n * Units ([1-100]*)                 - each block is finally divided into 100 units, approximately 64 hectares\n *\n * Two subsets of the complete NTS format is supported:\n *     - Sheet and Map Unit Subdivision\n *     - Sheet, Map Unit Subdivision, and Map Sheet Unit\n *\n * Note that \"Blocks\" and \"Units\" are currently not supported on geogratis and are ignored on the query.\n */\nvar NTSQuery = /** @class */ (function (_super) {\n    __extends(NTSQuery, _super);\n    function NTSQuery(config, query) {\n        var _this = this;\n        // front pad 0 if NTS starts with two digits\n        query = !parseInt(query[2]) ? '0' + query : query;\n        _this = _super.call(this, config, query) || this;\n        _this.unitName = query;\n        _this.onComplete = new Promise(function (resolve, reject) {\n            _this.locateByQuery().then(function (lr) {\n                // query check added since it can be null but will never be in this case (make TS happy)\n                if (lr.length > 0 && _this.query) {\n                    var allSheets = _this.locateToResult(lr);\n                    _this.unit = allSheets.splice(allSheets.findIndex(function (x) { return x.nts === _this.query; }), 1)[0];\n                    _this.mapSheets = allSheets;\n                    _this.featureResults = _this.unit;\n                    _this.nameByLatLon(_this.unit.LatLon.lat, _this.unit.LatLon.lon).then(function (r) {\n                        _this.results = r;\n                        resolve(_this);\n                    });\n                }\n                else {\n                    reject('Not found');\n                }\n            });\n        });\n        return _this;\n    }\n    NTSQuery.prototype.locateToResult = function (lrl) {\n        var _this = this;\n        var results = lrl.map(function (ls) {\n            var title = ls.title.split(' ');\n            return {\n                nts: title.shift() || '',\n                location: title.join(' '),\n                code: 'NTS',\n                desc: _this.config.types.allTypes.NTS,\n                LatLon: { lat: ls.geometry.coordinates[1], lon: ls.geometry.coordinates[0] },\n                bbox: ls.bbox\n            };\n        });\n        return results;\n    };\n    NTSQuery.prototype.equals = function (otherQ) {\n        return this.unitName === otherQ.unitName;\n    };\n    return NTSQuery;\n}(Query));\nexport { NTSQuery };\nvar FSAQuery = /** @class */ (function (_super) {\n    __extends(FSAQuery, _super);\n    function FSAQuery(config, query) {\n        var _this = this;\n        query = query.substring(0, 3).toUpperCase();\n        _this = _super.call(this, config, query) || this;\n        _this.onComplete = new Promise(function (resolve, reject) {\n            _this.formatLocationResult().then(function (fLR) {\n                if (fLR) {\n                    _this.featureResults = fLR;\n                    _this.nameByLatLon(fLR.LatLon.lat, fLR.LatLon.lon, Object.keys(fLR._provinces).map(function (x) { return parseInt(x); })).then(function (r) {\n                        _this.results = r;\n                        resolve(_this);\n                    });\n                }\n                else {\n                    reject('FSA code given cannot be found.');\n                }\n            });\n        });\n        return _this;\n    }\n    FSAQuery.prototype.formatLocationResult = function () {\n        var _this = this;\n        return this.locateByQuery().then(function (locateResponseList) {\n            // query check added since it can be null but will never be in this case (make TS happy)\n            if (locateResponseList.length === 1 && _this.query) {\n                var provList_1 = _this.config.provinces.fsaToProvinces(_this.query);\n                return {\n                    fsa: _this.query,\n                    code: 'FSA',\n                    desc: _this.config.types.allTypes.FSA,\n                    province: Object.keys(provList_1).map(function (i) { return provList_1[i]; }).join(','),\n                    _provinces: provList_1,\n                    LatLon: { lat: locateResponseList[0].geometry.coordinates[1], lon: locateResponseList[0].geometry.coordinates[0] }\n                };\n            }\n        });\n    };\n    return FSAQuery;\n}(Query));\nexport { FSAQuery };\n\n\n\n// WEBPACK FOOTER //\n// ./src/query.ts","import * as jsonprovs from '../data/provinces.json';\nimport * as jsonfsaToProv from '../data/fsa_to_prov.json';\nvar provinceObj = {};\nvar fsaToProv = jsonfsaToProv;\nvar provs = jsonprovs;\nvar Provinces = /** @class */ (function () {\n    function Provinces(language) {\n        var _this = this;\n        this.list = {};\n        Object.keys(provs[language]).forEach(function (provKey) {\n            _this.list[provKey] = provs[language][provKey];\n        });\n    }\n    Provinces.prototype.fsaToProvinces = function (fsa) {\n        var _this = this;\n        var genericObj = {};\n        // either a provincial code, or an array of them\n        var provCodes = fsaToProv[fsa.substring(0, 1).toUpperCase()];\n        if (typeof provCodes === 'number') {\n            provCodes = [provCodes];\n        }\n        provCodes.forEach(function (n) {\n            genericObj[n] = _this.list[n];\n        });\n        return genericObj;\n    };\n    return Provinces;\n}());\nexport default function (language) {\n    return provinceObj[language] = provinceObj[language] ? provinceObj[language] : new Provinces(language);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/provinces.ts","module.exports = {\"en\":{\"10\":\"Newfoundland and Labrador\",\"11\":\"Prince Edward Island\",\"12\":\"Nova Scotia\",\"13\":\"New Brunswick\",\"24\":\"Quebec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"British Columbia\",\"60\":\"Yukon\",\"61\":\"Northwest Territories\",\"62\":\"Nunavut\",\"72\":\"Undersea Feature\",\"73\":\"International Waters\"},\"fr\":{\"10\":\"Terre-Neuve-et-Labrador\",\"11\":\"Île-du-Prince-Édouard\",\"12\":\"Nouvelle-Écosse\",\"13\":\"Nouveau-Brunswick\",\"24\":\"Québec\",\"35\":\"Ontario\",\"46\":\"Manitoba\",\"47\":\"Saskatchewan\",\"48\":\"Alberta\",\"59\":\"Colombie-Britannique\",\"60\":\"Yukon\",\"61\":\"Territoires du Nord-Ouest\",\"62\":\"Nunavut\",\"72\":\"Entité sous-marine\",\"73\":\"Eaux internationales\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./data/provinces.json\n// module id = 93\n// module chunks = 0 1","module.exports = {\"A\":10,\"B\":12,\"C\":11,\"E\":13,\"G\":24,\"H\":24,\"J\":24,\"K\":35,\"L\":35,\"M\":35,\"N\":35,\"P\":35,\"R\":46,\"S\":47,\"T\":48,\"V\":59,\"X\":[62,61],\"Y\":60}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./data/fsa_to_prov.json\n// module id = 94\n// module chunks = 0 1","import * as jsontypes from '../data/types.json';\nvar typeObj = {};\nvar types = jsontypes;\nvar Types = /** @class */ (function () {\n    function Types(language) {\n        var _this = this;\n        this.allTypes = {};\n        this.validTypes = {};\n        this.filterComplete = false;\n        Object.keys(types[language]).forEach(function (typeKey) {\n            _this.allTypes[typeKey] = types[language][typeKey];\n            _this.validTypes[typeKey] = types[language][typeKey];\n        });\n    }\n    Types.prototype.filterValidTypes = function (include, exclude) {\n        if (this.filterComplete) {\n            return this.validTypes;\n        }\n        include = typeof include === 'string' ? [include] : include;\n        exclude = typeof exclude === 'string' ? [exclude] : exclude;\n        var setExclusion = include || exclude ? (include && include.length > 0) || (exclude && exclude.length) : undefined;\n        if (setExclusion) {\n            var typeSet = Object.keys(this.validTypes);\n            var keySet_1 = include || exclude || [];\n            var invalidKeys = typeSet.slice().filter(function (x) { return !setExclusion === (keySet_1.indexOf(x) !== -1); });\n            for (var _i = 0, invalidKeys_1 = invalidKeys; _i < invalidKeys_1.length; _i++) {\n                var key = invalidKeys_1[_i];\n                delete this.validTypes[key];\n            }\n        }\n        this.filterComplete = true;\n        return this.validTypes;\n    };\n    return Types;\n}());\nexport default function (language) {\n    return typeObj[language] = typeObj[language] ? typeObj[language] : new Types(language);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/types.ts","module.exports = {\"en\":{\"FSA\":\"Forward Sortation Area\",\"NTS\":\"National Topographic System\",\"PROV\":\"Province\",\"TERR\":\"Territory\",\"CITY\":\"City\",\"TOWN\":\"Town\",\"VILG\":\"Village\",\"HAM\":\"Hamlet\",\"UTM\":\"Upper Tier Municipality\",\"LTM\":\"Lower Tier Municipality\",\"STM\":\"Single Tier Municipality\",\"MUN1\":\"Other Municipal-District Area-Major Agglom.\",\"MUN2\":\"Other Municipal-District Area-Miscellaneous\",\"UNP\":\"Unincorporated place\",\"IR\":\"Indian Reserve\",\"GEOG\":\"Geographical Area\",\"PARK\":\"Conservation Area\",\"MIL\":\"Military Area\",\"RIV\":\"River\",\"RIVF\":\"River Feature\",\"FALL\":\"Falls\",\"LAKE\":\"Lake\",\"SPRG\":\"Spring\",\"SEA\":\"Sea\",\"SEAF\":\"Sea Feature\",\"SEAU\":\"Undersea Feature\",\"CHAN\":\"Channel\",\"RAP\":\"Rapids\",\"BAY\":\"Bay\",\"CAPE\":\"Cape\",\"BCH\":\"Beach\",\"SHL\":\"Shoal\",\"ISL\":\"Island\",\"CLF\":\"Cliff\",\"MTN\":\"Mountain\",\"VALL\":\"Valley\",\"PLN\":\"Plain\",\"CAVE\":\"Cave\",\"CRAT\":\"Crater\",\"GLAC\":\"Glacier\",\"FOR\":\"Forest\",\"VEGL\":\"Low Vegetation\",\"MISC\":\"Miscellaneous\",\"RAIL\":\"Railway Feature\",\"ROAD\":\"Road Feature\",\"AIR\":\"Air Navigation Feature\",\"MAR\":\"Marine Navigation Feature\",\"HYDR\":\"Hydraulic Construction\",\"RECR\":\"Recreational Site\",\"RES\":\"Natural Resources Site\",\"CAMP\":\"Miscellaneous Campsite\",\"SITE\":\"Miscellaneous Site\"},\"fr\":{\"FSA\":\"Région De Tri D'Acheminement\",\"NTS\":\"Système National De Référence Cartographique\",\"PROV\":\"Province\",\"TERR\":\"Territoire\",\"CITY\":\"Ville\",\"TOWN\":\"Ville\",\"VILG\":\"Village\",\"HAM\":\"Hameau\",\"UTM\":\"Municipalité de palier supérieure\",\"LTM\":\"Municipalité de palier inférieur\",\"STM\":\"Municipalité de palier simple\",\"MUN1\":\"Autre zone municip.-District-Agglom. majeure\",\"MUN2\":\"Autre zone municipale-District-Divers\",\"UNP\":\"Lieu non organisé\",\"IR\":\"Réserve indienne\",\"GEOG\":\"Zone géographique\",\"PARK\":\"Zone de préservation\",\"MIL\":\"Réserve militaire\",\"RIV\":\"Cours d'eau\",\"RIVF\":\"Entité fluviale\",\"FALL\":\"Chute\",\"LAKE\":\"Lac\",\"SPRG\":\"Source\",\"SEA\":\"Mer\",\"SEAF\":\"Entité maritime\",\"SEAU\":\"Entité sous-marine\",\"CHAN\":\"Chenal\",\"RAP\":\"Rapide\",\"BAY\":\"Baie\",\"CAPE\":\"Cap\",\"BCH\":\"Plage\",\"SHL\":\"Haut-fond\",\"ISL\":\"Île\",\"CLF\":\"Escarpement\",\"MTN\":\"Montagne\",\"VALL\":\"Vallée\",\"PLN\":\"Plaine\",\"CAVE\":\"Caverne\",\"CRAT\":\"Cratère\",\"GLAC\":\"Glacier\",\"FOR\":\"Forêt\",\"VEGL\":\"Végétation basse\",\"MISC\":\"Divers\",\"RAIL\":\"Entité ferroviaire\",\"ROAD\":\"Entité routière\",\"AIR\":\"Entité de navigation aérienne\",\"MAR\":\"Entité de navigation maritime\",\"HYDR\":\"Construction hydraulique\",\"RECR\":\"Site récréationnel\",\"RES\":\"Site de ressources naturelles\",\"CAMP\":\"Camp-Divers\",\"SITE\":\"Site-Divers\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./data/types.json\n// module id = 96\n// module chunks = 0 1","export function isFSAResult(result) {\n    return !!result.fsa;\n}\nexport function isNTSResult(result) {\n    return !!result.nts;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/definitions.ts"],"sourceRoot":""}